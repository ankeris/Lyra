{% from "mixins/macros.html" import loadingSpeakers %}
{% from "mixins/sideNavigation.html" import sideNavigation %}
{% from "mixins/intro-image-text.html" import introImageText %}
{% from "mixins/dynamic-link.html" import dynamicLink %}
{% extends "layouts/default.html" %}

{% block head %}
    {% if data.category %}
    <title>Lyra | {{data.category.name}}</title>
    {% else %}
	<title>{{globaldata.titles.products}}</title>
    {% endif %}
    <meta name="Description" content="Garso aparatūros asortimentas, kruopščiai atrinkti kokybiški produktai">
{% endblock %}

{% block intro %}
	{% set title = ( data.category.name if data.category else "Produktų katalogas" ) %}
	{% set text = ( data.category.description if data.category.description else "Lorem. Curabitur feugiat ornare tellus sed tristique. Etiam fermentum enim nisl. Morbi a condimentum elit. Phasellus tincidunt augue et lectus malesuada hendrerit. Curabitur imperdiet leo eget orci tempor sagittis. Nulla facilisi. Etiam laoreet nunc et massa cursus bibendum. Cras sit amet pretium tortor. Etiam non sapien nec arcu fermentum rutrum. Pellentesque bibendum velit tellus, et dignissim elit rhoncus id." ) %}
	{% set img = ( data.category.CoverImage.secure_url if data.category else "/images/products-page.jpg" ) %}
    {{introImageText(title, text, img)}}
{% endblock %}

{% block content %}
<div class="products-wrapper content-section">
<figure class="sort-bar__box push-vertical content-section">
    {% if data.category %}
    {{dynamicLink(
        [{
            name: "produktai",
            url: "/produktai/"
        },
        {
            name: data.category.name,
            url: "/produktai/" + data.category.key
        }]
    )}}
    {% endif %}
    {% include 'partials/sort.html' %}
</figure>
    {{sideNavigation("products-page", data)}}

    {# items box wrapper #}
    <section class="products">
            {# looping through products #}
            {% for product in data.products %}
            {% include 'partials/product-item.html' %}
            {% endfor %}
    </section>
</div>
{# Loading screen for products #}
    {{ loadingSpeakers("#1f1f1f", "#448AA6") }}
    {# {% include 'partials/loadingspinner.html' %} #}

<div class="variables" data-sort="{{data.sort}}" data-category="{{data.category.key}}" data-count="{{data.products.results.length}}" data-search="{{filters.search}}"></div>

{% endblock %}

{% block js %}
    <script src="/js/dist/products.bundle.js"></script>
{% endblock %}