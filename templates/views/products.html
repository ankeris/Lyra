{% from "mixins/macros.html" import loadingSpeakers %}
{% extends "layouts/default.html" %}

{% block head %}
    {% if data.category %}
    <title>Lyra | {{data.category.name}}</title>
    {% else %}
	<title>{{globaldata.titles.products}}</title>
    {% endif %}
    <meta name="Description" content="Garso aparatūros asortimentas, kruopščiai atrinkti kokybiški produktai">
{% endblock %}

{% block intro %}
	{% set title = ( data.category.name if data.category else "Produktų katalogas" ) %}
	{% set img = ( data.category.CoverImage.secure_url if data.category else "/images/products-page.jpg" ) %}

    <section class="products-intro" style="background-image: url({{img}})">
        <h3 class="products-intro--title">{{ title }}</h3>
        <p class="products-intro--description">Integer sollicitudin malesuada libero, ac vehicula purus venenatis ut. Curabitur feugiat ornare tellus sed tristique. Etiam fermentum enim nisl. Morbi a condimentum elit. Phasellus tincidunt augue et lectus malesuada hendrerit. Curabitur imperdiet leo eget orci tempor sagittis. Nulla facilisi. Etiam laoreet nunc et massa cursus bibendum. Cras sit amet pretium tortor. Etiam non sapien nec arcu fermentum rutrum. Pellentesque bibendum velit tellus, et dignissim elit rhoncus id. Fusce et quam tortor. Mauris maximus vel neque sit amet fringilla. In hac habitasse platea dictumst. Phasellus faucibus nulla quis dapibus vulputate.</p>
    </section>
{% endblock %}

{% block content %}
<div class="products-wrapper content-section">
{% include 'partials/sort.html' %}
    {% include 'partials/sideNavigation.html'%}

    {# items box wrapper #}
    <section class="products">
            {# looping through products #}
            {% for product in data.products %}
            {# {{product.images[0].secure_url}} #}
            {# product variables #}
            {% set manufacturerKey = product.Manufacturer.key %}
            {% set manufacturerName = product.Manufacturer.name %}
            {% set productTypeKey = product.ProductType[0].key %}
            {% set productType = product.ProductType[0].name %}

            <div class="items-box__item fade-in">
            <a aria-label="{{product.title}}" title="{{product.title}}" href="/products/{{manufacturerKey}}/{{productTypeKey}}/{{product.slug}}">
                {% if product.images %}
                    {# Main image #}
                    <img class="items-box__item--main-image" alt="{{product.title}}" src="{{product.images[0].secure_url}}">
                    </img>
                {% endif %}
                <p class="items-box__item--description">
                    <span class="items-box__item--description-title">{{manufacturerName | upper}} - {{product.title | upper}}</span>
                    <br>
                    <span class="items-box__item--description-type">{{productType | lower}}</span>
                    <br>
                    <span class="items-box__item--description-price">{{product.price}}€</span>
                </p>
            </a>
            </div>
            {% endfor %}
    </section>
</div>
{# Loading screen for products #}
    {{ loadingSpeakers("#1f1f1f", "#448AA6") }}
    {# {% include 'partials/loadingspinner.html' %} #}


<div class="variables" data-sort="{{data.sort}}" data-category="{{data.category.key}}" data-count="{{data.products.results.length}}" data-search="{{filters.search}}"></div>

{% endblock %}

{% block js %}
    <script src="/js/dist/products.bundle.js"></script>
{% endblock %}